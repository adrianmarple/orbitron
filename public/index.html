<!DOCTYPE html>
<html>
<head>
<title>Super Orbitron</title>
<link rel="shortcut icon" href="/favicon.png" />

<style type="text/css">
html, body, #main {
  margin: 0;
  width: 100%;
  height: 100%;
}
#main {
  display: flex;
  flex-direction: column;
  align-items: center;
  font-size: 3em;
  font-family: Arial;
  padding-top: 8vh;
  box-sizing: border-box;
  background: url("logoMonochromeAlpha.png");
  background-repeat: no-repeat;
  background-position: bottom 10% right 50%;
  background-size: auto 50vh;
}


@keyframes animatedBackground {
  from { background-position: 0 0; }
  to { background-position: 100% 0; }
}
#background {
  position: fixed;
  left: -150vh;
  top: -200vw;
  z-index: -1;
  width: 400vh;
  height: 500vw;
  background: url("greydient.png");
  -webkit-transform: rotate(60deg);
  -moz-transform: rotate(60deg);
  -ms-transform: rotate(60deg);
  -o-transform: rotate(60deg);
  transform: rotate(60deg);
  background-size: 20% 100%;
  animation: animatedBackground 100s linear infinite;
  opacity: 0.5;
}

.e-show {
  display: none;
}
.error .e-show {
  display: initial;
}

.e-hide {
  display: initial;
}
.error .e-hide {
  display: none;
}

.bang {
  color: white;
  background: #121212;
  padding: 12px;
  border-radius: 50%;
  font-size: 3em;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 128px;
  height: 128px;
  margin-top: 24px;
}

.button {
  background: white;
  border-radius: 12px;
  padding: 24px;
  margin-top: 24px;
  cursor: pointer;
  font-weight: bold;
  box-shadow: 0 0.4rem 1rem 0.25rem rgba(0, 0, 0, 0.5);
}
</style>
</head>
<body>
<div id="background"></div>
<div id="main">
  <div class="e-show">Please connect to wifi "Super Orbitron"</div>
  <div class="e-show"><div class="bang">!</div></div>
  <div class="e-show button" onclick="checkConnection()">Try connecting again</div>
  <div class="e-hide button" onclick="checkConnection()">Connect to the Orbitron</div>

  <div id="logo" src="/logoMonochromeAlpha.png" />
</div>


<script>
const url = "http://192.168.4.1:1337"


function checkConnection() {
  console.log("Checking connection")
  let newWindow = open(url)

  setTimeout(() => {
    try {
      newWindow.location.href
      newWindow.close()
      document.getElementById("main").classList.add("error")
    } catch(e) {
      // Error means cross domain access was attempted and page is loading properly.
      close()
    }
  }, 500)
}

</script>
</body>
</html>
